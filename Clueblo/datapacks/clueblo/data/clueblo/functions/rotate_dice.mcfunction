# animate dice
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice1"],CustomName:'{"text":"1","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmUyMmMyOThlN2M2MzM2YWYxNzkwOWFjMWYxZWU2ODM0YjU4YjFhM2NjOTlhYmEyNTVjYTdlYWViNDc2MTczIn19fQ=="}]}}}}}
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice1"],CustomName:'{"text":"2","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzFiN2E3M2ZjOTM0YzlkZTkxNjBjMGZkNTlkZjZlNDJlZmQ1ZDAzNzhlMzQyYjY4NjEyY2ZlYzNlODk0ODM0YSJ9fX0=="}]}}}}}
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice2"],CustomName:'{"text":"3","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWJlNjc3YTFlMTYzYTlmOWUwYWZjZmNkZTBjOTUzNjU1NTM0NzhmOTlhYjExMTUyYTRkOTdjZjg1ZGJlNjZmIn19fQ==="}]}}}}}
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice3"],CustomName:'{"text":"4","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWYyOTk2ZWZjMmJiMDU0ZjUzZmIwYmQxMDZlYmFlNjc1OTM2ZWZlMWZlZjQ0MWY2NTNjMmRjZTM0OTczOGUifX19=="}]}}}}}
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice4"],CustomName:'{"text":"5","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTBkMmEzY2U0OTk5ZmVkMzMwZDNhNWQwYTllMjE4ZTM3ZjRmNTc3MTk4MDg2NTczOTZkODMyMjM5ZTEyIn19fQ=="}]}}}}}
# summon item ~ ~ ~ {Age:-32768,PickupDelay:32767,Tags:["BaseDice5"],CustomName:'{"text":"6","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDFhMmMwODg2MzdmZWU5YWUzYTM2ZGQ0OTZlODc2ZTY1N2Y1MDlkZTU1OTcyZGQxN2MxODc2N2VhZTFmM2U5In19fQ=="}]}}}}}

# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmUyMmMyOThlN2M2MzM2YWYxNzkwOWFjMWYxZWU2ODM0YjU4YjFhM2NjOTlhYmEyNTVjYTdlYWViNDc2MTczIn19fQ=="}]}}} 1
# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;-1892511045,1987465206,-1862209775,-58066557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzFiN2E3M2ZjOTM0YzlkZTkxNjBjMGZkNTlkZjZlNDJlZmQ1ZDAzNzhlMzQyYjY4NjEyY2ZlYzNlODk0ODM0YSJ9fX0="}]}}} 1
# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;1026356868,-432783094,-1569227431,1768196456],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWJlNjc3YTFlMTYzYTlmOWUwYWZjZmNkZTBjOTUzNjU1NTM0NzhmOTlhYjExMTUyYTRkOTdjZjg1ZGJlNjZmIn19fQ=="}]}}} 1
# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;1742733438,1822443318,-1240221009,-376669001],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYWYyOTk2ZWZjMmJiMDU0ZjUzZmIwYmQxMDZlYmFlNjc1OTM2ZWZlMWZlZjQ0MWY2NTNjMmRjZTM0OTczOGUifX19"}]}}} 1
# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;-1199508408,588661428,-1958851602,905805244],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTBkMmEzY2U0OTk5ZmVkMzMwZDNhNWQwYTllMjE4ZTM3ZjRmNTc3MTk4MDg2NTczOTZkODMyMjM5ZTEyIn19fQ=="}]}}} 1
# /give @p minecraft:player_head{display:{Name:"{\"text\":\"Dice (red)\"}"},SkullOwner:{Id:[I;1483621416,1338523683,-1646574192,-1499186009],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDFhMmMwODg2MzdmZWU5YWUzYTM2ZGQ0OTZlODc2ZTY1N2Y1MDlkZTU1OTcyZGQxN2MxODc2N2VhZTFmM2U5In19fQ=="}]}}} 1

# replace dropped dice with animated dice
# for one dice
execute as @e[type=item,tag=!Dice,nbt={Item:{id:"minecraft:player_head",Count:1b}}] at @s run summon item ~ ~ ~ {PickupDelay:32767,Tags:["Dice","Dice1"],CustomName:'{"text":"1","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmUyMmMyOThlN2M2MzM2YWYxNzkwOWFjMWYxZWU2ODM0YjU4YjFhM2NjOTlhYmEyNTVjYTdlYWViNDc2MTczIn19fQ=="}]}}}}}

# for two dices
execute as @e[type=item,tag=!Dice,nbt={Item:{id:"minecraft:player_head",Count:2b}}] at @s run summon item ~ ~ ~ {PickupDelay:32767,Tags:["Dice","Dice1"],CustomName:'{"text":"1","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmUyMmMyOThlN2M2MzM2YWYxNzkwOWFjMWYxZWU2ODM0YjU4YjFhM2NjOTlhYmEyNTVjYTdlYWViNDc2MTczIn19fQ=="}]}}}}}
execute as @e[type=item,tag=!Dice,nbt={Item:{id:"minecraft:player_head",Count:2b}}] at @s run summon item ~ ~ ~ {PickupDelay:32767,Tags:["Dice","Dice1"],CustomName:'{"text":"1","color":"gold","bold":true,"italic":false}',Item:{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1719126018,-1744418856,-1189114273,1353348557],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNmUyMmMyOThlN2M2MzM2YWYxNzkwOWFjMWYxZWU2ODM0YjU4YjFhM2NjOTlhYmEyNTVjYTdlYWViNDc2MTczIn19fQ=="}]}}}}}
execute as @e[type=item,tag=!Dice,nbt={Item:{id:"minecraft:player_head"}}] run kill @s

# replace dice with following dice
# TODO maybe change from tags to scoreboards
execute as @e[type=item,tag=Dice6,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice1,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice6,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 2
execute as @e[type=item,tag=Dice6,tag=!Fallen] run tag @s add Dice0
execute as @e[type=item,tag=Dice6,tag=!Fallen] run tag @s remove Dice6

execute as @e[type=item,tag=Dice5,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice6,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice5,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 1.8
execute as @e[type=item,tag=Dice5,tag=!Fallen] run tag @s add Dice6
execute as @e[type=item,tag=Dice5,tag=!Fallen] run tag @s remove Dice5

execute as @e[type=item,tag=Dice4,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice5,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice4,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 1.6
execute as @e[type=item,tag=Dice4,tag=!Fallen] run tag @s add Dice5
execute as @e[type=item,tag=Dice4,tag=!Fallen] run tag @s remove Dice4

execute as @e[type=item,tag=Dice3,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice4,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice3,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 1.4
execute as @e[type=item,tag=Dice3,tag=!Fallen] run tag @s add Dice4
execute as @e[type=item,tag=Dice3,tag=!Fallen] run tag @s remove Dice3

execute as @e[type=item,tag=Dice2,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice3,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice2,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 1.2
execute as @e[type=item,tag=Dice2,tag=!Fallen] run tag @s add Dice3
execute as @e[type=item,tag=Dice2,tag=!Fallen] run tag @s remove Dice2

execute as @e[type=item,tag=Dice1,tag=!Fallen] run data modify entity @s Item.tag.SkullOwner set from entity @e[type=minecraft:item,tag=BaseDice2,limit=1] Item.tag.SkullOwner
execute as @e[type=item,tag=Dice1,tag=!Fallen] at @s run playsound minecraft:block.note_block.bit neutral @a ~ ~ ~ 1 1
execute as @e[type=item,tag=Dice1,tag=!Fallen] run tag @s add Dice2
execute as @e[type=item,tag=Dice1,tag=!Fallen] run tag @s remove Dice1

execute as @e[type=item,tag=Dice0,tag=!Fallen] run tag @s add Dice1
execute as @e[type=item,tag=Dice0,tag=!Fallen] run tag @s remove Dice0

# add one to dice time 
scoreboard players add @e[type=item,tag=Dice,tag=!BaseDice,tag=!Fallen] diceTime 1 
# stop dice and calculate number if dice time is reached
execute as @e[type=item,tag=Dice,tag=!BaseDice,tag=!Fallen, scores={diceTime=20..}] run function clueblo:stop_dice

execute if entity @e[type=item,tag=Dice,tag=!BaseDice,tag=!Fallen] run schedule function clueblo:rotate_dice 2t replace